<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Tabs</title>
    <style type="text/css">
    * {
        margin: 0;
        padding: 0;
    }
    
    ul,
    ol,
    li {
        list-style: none;
    }
    
    #tabs {
        overflow: hidden;
    }
    
    #tabs li {
        float: left;
        padding: 10px;
        cursor: pointer;
    }
    
    #tabs li.active {
        color: #ff5e6d;
    }
    
    #main div {
        display: none;
    }
    
    #main .active {
        display: block;
    }
    </style>
    <script type="text/javascript" src="http://apps.bdimg.com/libs/underscore.js/1.7.0/underscore-min.js"></script>
    <script type="text/javascript" src="./libs/jquery-1.8.3.min.js"></script>
    <script type="text/javascript">
    // 测试这个值是否存在
    var assert = function(value, msg) {
        if (!value) {
            console.log(msg || (value + '  dose not equal true'));
        }
    };

    // 测试两个变量是否全等
    var assertEqual = function(val1, val2, msg) {
        if (val1 !== val2) {
            console.log(msg || (val1 + '不等于' + val2));
        }
    };

    // 深度比较
    var deepEqual = function(val1, val2, msg) {
        if (!_.isEqual(val1, val2)) {
            console.log(msg || (val1 + ' 不等于 ' + val2));
        }
    }
    </script>
    <script type="text/javascript">
    assert(true, 'true');
    assert(false, 'false');

    assertEqual(1, 1);
    assertEqual(1, 2);

    deepEqual({
        saul: 1
    }, {
        saul: 2
    });
    </script>
</head>

<body>
    <ul id='tabs'>
        <li data-tab='sect1'>选项卡1</li>
        <li data-tab='sect2'>选项卡2</li>
        <li data-tab='sect3'>选项卡3</li>
        <li data-tab='sect4'>选项卡4</li>
        <li data-tab='sect5'>选项卡5</li>
    </ul>
    <div id="main">
        <div data-tab='sect1'>内容块1</div>
        <div data-tab='sect2'>内容块2</div>
        <div data-tab='sect3'>内容块3</div>
        <div data-tab='sect4'>内容块4</div>
        <div data-tab='sect5'>内容块5</div>
    </div>
    <script type="text/javascript">
    // jQuery.fn.tabs = function(control) { // 传入内容块
    //   var element  = $(this); // this 指向 tabs 而不是子项
    //   control = $(control);
    //   // 委托事件
    //   element.delegate("li", "click", function() {
    //       var tabName = $(this).attr('data-tab');
    //       // 触发自定义事件
    //       element.trigger('change.tabs', tabName); // 使用命名空间来自定义事件名称
    //   });
    //   // 绑定自定义事件
    //   element.bind("change.tabs", function(e, tabName) {
    //       // 取消初始样式，定义符合当前项样式
    //       element.find('li').removeClass('active');
    //       element.find(">[data-tab='" + tabName + "']" ).addClass('active');
    //   });  

    //   element.bind("change.tabs", function(e, tabName) {
    //       // 对内容块也做如上处理
    //       control.find('>[data-tab]').removeClass('active');
    //       control.find(">[data-tab='" + tabName + "']" ).addClass('active');
    //   });

    //   var firstName = element.find('li:first').attr('data-tab');
    //   element.trigger('change.tabs', firstName);

    //   return this;

    // };


    // jQuery(function($) {
    //   $('#tabs').tabs('#main');
    // })




    jQuery.fn.tabs = function(control) {
        var element = $(this);
        control = $(control);

        element.delegate('li', 'click', function() {
            var tabName = $(this).attr('data-tab');
            element.trigger('change.tabs', tabName);
        });

        element.bind("change.tabs", function(e, tabName) {
            element.find("li").removeClass("active");
            element.find(">[data-tab='" + tabName + "']").addClass("active");
            // element.find(">[data-tab='" + tabName + "']").addClass("active");
        });

        element.bind("change.tabs", function(e, tabName) {
            control.find(">[data-tab]").removeClass("active");
            control.find(">[data-tab='" + tabName + "']").addClass("active");
            // control.find(">[data-tab='" + tabName + "']").addClass("active");
        });

        var firstName = element.find("li:first").attr("data-tab");
        element.trigger("change.tabs", firstName);
        return this;
    }


    $(function() {
        $('#tabs').tabs("#main");
    })
    </script>
</body>

</html>
