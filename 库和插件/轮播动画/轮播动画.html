<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>jQurey轮播动画</title>
    <link rel="stylesheet" type="text/css" href="css/Normalize.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script type="text/javascript" src="../src/libs/jquery-1.8.3.min.js"></script>
    <script type="text/javascript">
    $(function() {
        var page = 1;
        var i = 4; //每个版面四张图

        //向后的按钮
        $('span.next').click(function() {
            var $parent = $(this).parents('div.v_show'); //通过当前元素找到父元素，也就是最顶部的元素
            var $v_show = $parent.find('div.v_content_list'); //拿到视频内容的展示区 
            var $v_content = $parent.find('div.v_content'); //拿到视频展示的外围div

            var v_width = $v_content.width(); //每个版面的宽度

            var len = $v_show.find('li').length; //共有多少图片
            var page_count = Math.ceil(len / i); //计算多少版面
            if (!$v_show.is(':animated')) { //避免动画叠加
                if (page == page_count) { //如果到达最后一一个版面，则调回来
                    $v_show.animate({
                        left: '0px'
                    }, 400);
                    page = 1;
                } else {
                    $v_show.animate({
                        left: '-=' + v_width //向左移动
                    }, 400);
                    page++;
                }

            }

            $parent.find('span').eq((page - 1)).addClass('current').siblings().removeClass('current'); //标示跟随
        });

        //向前的按钮
        $('span.prev').click(function() {
            var $parent = $(this).parents('div.v_show'); //通过当前元素找到父元素，也就是最顶部的元素
            var $v_show = $parent.find('div.v_content_list'); //拿到视频内容的展示区 
            var $v_content = $parent.find('div.v_content'); //拿到视频展示的外围div
            var v_width = $v_content.width();
            var len = $v_show.find('li').length;
            var page_count = Math.ceil(len / i);
            if (!$v_show.is(':animated')) {
                if (page == 1) {
                    $v_show.animate({
                        left: '-=' + v_width * (page_count - 1) //注意这里的计算，单个宽度乘以总版面减一
                    }, 400);
                    page = page_count; //此时，页面对应的数量得设置清楚
                } else {
                    $v_show.animate({
                        left: '+=' + v_width
                    }, 400);
                    page--; //页面所在位置继续记录
                }
            }
            $parent.find('span').eq((page - 1)).addClass('current').siblings().removeClass('current');
        })
    })
    </script>
</head>

<body>
    <div class="v_show">
        <div class="v_caption">
            <h2 class="cartoon" title="卡通动漫">卡通动漫</h2>
            <div class="hightlight_tip">
                <span class="current">1</span>
                <span>2</span>
                <span>3</span>
                <span>4</span>
            </div>
            <div class="change_btn">
                <span class="prev">上一页</span>
                <span class="next">下一页</span>
            </div>
            <em><a href="#">更多</a></em>
        </div>
        <div class="v_content">
            <div class="v_content_list">
                <ul>
                    <li>
                        <a href="#"><img src="img/01.jpg" alt=""></a>
                        <h4><a href="#">海贼王</a></h4><span>播放<em>3445</em></span></li>
                    <li>
                        <a href="#"><img src="img/01.jpg" alt=""></a>
                        <h4><a href="#">海贼王</a></h4><span>播放<em>3445</em></span></li>
                    <li>
                        <a href="#"><img src="img/01.jpg" alt=""></a>
                        <h4><a href="#">海贼王</a></h4><span>播放<em>3445</em></span></li>
                    <li>
                        <a href="#"><img src="img/01.jpg" alt=""></a>
                        <h4><a href="#">海贼王</a></h4><span>播放<em>3445</em></span></li>
                    <li>
                        <a href="#"><img src="img/02.jpg" alt=""></a>
                        <h4><a href="#">哆啦A梦</a></h4><span>播放<em>3445</em></span></li>
                    <li>
                        <a href="#"><img src="img/02.jpg" alt=""></a>
                        <h4><a href="#">哆啦A梦</a></h4><span>播放<em>3445</em></span></li>
                    <li>
                        <a href="#"><img src="img/02.jpg" alt=""></a>
                        <h4><a href="#">哆啦A梦</a></h4><span>播放<em>3445</em></span></li>
                    <li>
                        <a href="#"><img src="img/02.jpg" alt=""></a>
                        <h4><a href="#">哆啦A梦</a></h4><span>播放<em>3445</em></span></li>
                    <li>
                        <a href="#"><img src="img/03.jpg" alt=""></a>
                        <h4><a href="#">火影忍者</a></h4><span>播放<em>3445</em></span></li>
                    <li>
                        <a href="#"><img src="img/03.jpg" alt=""></a>
                        <h4><a href="#">火影忍者</a></h4><span>播放<em>3445</em></span></li>
                    <li>
                        <a href="#"><img src="img/03.jpg" alt=""></a>
                        <h4><a href="#">火影忍者</a></h4><span>播放<em>3445</em></span></li>
                    <li>
                        <a href="#"><img src="img/03.jpg" alt=""></a>
                        <h4><a href="#">火影忍者</a></h4><span>播放<em>3445</em></span></li>
                    <li>
                        <a href="#"><img src="img/04.jpg" alt=""></a>
                        <h4><a href="#">龙珠</a></h4><span>播放<em>3445</em></span></li>
                    <li>
                        <a href="#"><img src="img/04.jpg" alt=""></a>
                        <h4><a href="#">龙珠</a></h4><span>播放<em>3445</em></span></li>
                    <li>
                        <a href="#"><img src="img/04.jpg" alt=""></a>
                        <h4><a href="#">龙珠</a></h4><span>播放<em>3445</em></span></li>
                    <li>
                        <a href="#"><img src="img/04.jpg" alt=""></a>
                        <h4><a href="#">龙珠</a></h4><span>播放<em>3445</em></span></li>
                </ul>
            </div>
        </div>
    </div>
</body>

</html>
